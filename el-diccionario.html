<!DOCTYPE html>
<html lang="es-ES" xml:lang="es-ES">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 4 El diccionario | Manual de uso de scritps de automatización de tabulados de Registros Administrativos de Seguridad Pública y Justicia</title>
  <meta name="description" content="Instrucciones y reglas de uso del script de automaización de tabulados y validaciones para Registros Administrativos de Seguridad Pública y Justicia" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content=" 4 El diccionario | Manual de uso de scritps de automatización de tabulados de Registros Administrativos de Seguridad Pública y Justicia" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Instrucciones y reglas de uso del script de automaización de tabulados y validaciones para Registros Administrativos de Seguridad Pública y Justicia" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 4 El diccionario | Manual de uso de scritps de automatización de tabulados de Registros Administrativos de Seguridad Pública y Justicia" />
  
  <meta name="twitter:description" content="Instrucciones y reglas de uso del script de automaización de tabulados y validaciones para Registros Administrativos de Seguridad Pública y Justicia" />
  

<meta name="author" content="Daniel M. Giménez" />


<meta name="date" content="2021-02-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="las-bases-de-datos.html"/>
<link rel="next" href="el-archivo-validador.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Manual: Scripts de Automatización de RRAA</a></li>      

<li class="divider"></li>
<li class="part"><span><b>PORTADA</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Presentación</a></li>
<li class="part"><span><b>PRIMERA PARTE: EL SISTEMA DE SCRIPTS</b></span></li>
<li class="chapter" data-level="" data-path="presentación-de-la-primera-parte.html"><a href="presentación-de-la-primera-parte.html"><i class="fa fa-check"></i>Presentación de la primera parte</a></li>
<li class="chapter" data-level="1" data-path="la-perspectiva-de-automatización-aplicada.html"><a href="la-perspectiva-de-automatización-aplicada.html"><i class="fa fa-check"></i><b>1</b> La perspectiva de automatización aplicada</a>
<ul>
<li class="chapter" data-level="1.1" data-path="la-perspectiva-de-automatización-aplicada.html"><a href="la-perspectiva-de-automatización-aplicada.html#la-solución-de-programadora"><i class="fa fa-check"></i><b>1.1</b> La solución de “programador/a”</a></li>
<li class="chapter" data-level="1.2" data-path="la-perspectiva-de-automatización-aplicada.html"><a href="la-perspectiva-de-automatización-aplicada.html#la-solución-de-usuarioa-de-excel"><i class="fa fa-check"></i><b>1.2</b> La solución de usuario/a de Excel</a></li>
<li class="chapter" data-level="1.3" data-path="la-perspectiva-de-automatización-aplicada.html"><a href="la-perspectiva-de-automatización-aplicada.html#el-control-del-flujo"><i class="fa fa-check"></i><b>1.3</b> El control del flujo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reglas-de-formato-y-convenciones-del-manual.html"><a href="reglas-de-formato-y-convenciones-del-manual.html"><i class="fa fa-check"></i><b>2</b> Reglas de formato y convenciones del Manual</a>
<ul>
<li class="chapter" data-level="2.1" data-path="reglas-de-formato-y-convenciones-del-manual.html"><a href="reglas-de-formato-y-convenciones-del-manual.html#formatos-para-los-scripts"><i class="fa fa-check"></i><b>2.1</b> Formatos para los scripts</a></li>
<li class="chapter" data-level="2.2" data-path="reglas-de-formato-y-convenciones-del-manual.html"><a href="reglas-de-formato-y-convenciones-del-manual.html#formatos_manual"><i class="fa fa-check"></i><b>2.2</b> Formatos de codigo en este manual</a></li>
</ul></li>
<li class="part"><span><b>SEGUNDA PARTE: LA FASE MANUAL</b></span></li>
<li class="chapter" data-level="" data-path="presentación-de-la-segunda-parte.html"><a href="presentación-de-la-segunda-parte.html"><i class="fa fa-check"></i>Presentación de la segunda parte</a></li>
<li class="chapter" data-level="3" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html"><i class="fa fa-check"></i><b>3</b> Las bases de datos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html#los-formatos-admitidos"><i class="fa fa-check"></i><b>3.1</b> Los formatos admitidos</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html#la-base-de-datos-la-unidad-fundamental"><i class="fa fa-check"></i><b>3.1.1</b> La base de datos: la unidad fundamental</a></li>
<li class="chapter" data-level="3.1.2" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html#verificación-de-la-integridad-de-las-bases-de-datos"><i class="fa fa-check"></i><b>3.1.2</b> Verificación de la integridad de las bases de datos</a></li>
<li class="chapter" data-level="3.1.3" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html#qué-observar-al-realizar-la-verificación-de-integridad"><i class="fa fa-check"></i><b>3.1.3</b> ¿Qué observar al realizar la verificación de integridad?</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html#el-ajuste-de-la-estructura-y-los-tipos-de-información-de-las-bases-de-datos"><i class="fa fa-check"></i><b>3.2</b> El ajuste de la estructura y los tipos de información de las bases de datos</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html#la-limpieza-de-la-base-de-datos"><i class="fa fa-check"></i><b>3.2.1</b> La limpieza de la base de datos</a></li>
<li class="chapter" data-level="3.2.2" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html#los-tipos-de-información-de-las-celdas"><i class="fa fa-check"></i><b>3.2.2</b> Los tipos de información de las celdas</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="las-bases-de-datos.html"><a href="las-bases-de-datos.html#unificación-de-bases-de-datos-divididas-en-múltiples-archivos"><i class="fa fa-check"></i><b>3.3</b> Unificación de bases de datos divididas en múltiples archivos</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="el-diccionario.html"><a href="el-diccionario.html"><i class="fa fa-check"></i><b>4</b> El diccionario</a>
<ul>
<li class="chapter" data-level="4.1" data-path="el-diccionario.html"><a href="el-diccionario.html#visión-general-del-diccionario"><i class="fa fa-check"></i><b>4.1</b> Visión general del diccionario</a></li>
<li class="chapter" data-level="4.2" data-path="el-diccionario.html"><a href="el-diccionario.html#la-hoja-meta"><i class="fa fa-check"></i><b>4.2</b> La hoja “meta”</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="el-diccionario.html"><a href="el-diccionario.html#el-año"><i class="fa fa-check"></i><b>4.2.1</b> El año</a></li>
<li class="chapter" data-level="4.2.2" data-path="el-diccionario.html"><a href="el-diccionario.html#la-ubicación-de-las-bases-de-datos"><i class="fa fa-check"></i><b>4.2.2</b> La ubicación de las bases de datos</a></li>
<li class="chapter" data-level="4.2.3" data-path="el-diccionario.html"><a href="el-diccionario.html#ubicación-de-los-archivos-validadores"><i class="fa fa-check"></i><b>4.2.3</b> Ubicación de los archivos validadores</a></li>
<li class="chapter" data-level="4.2.4" data-path="el-diccionario.html"><a href="el-diccionario.html#texto-de-la-fuente-para-tabulados"><i class="fa fa-check"></i><b>4.2.4</b> Texto de la fuente para tabulados</a></li>
<li class="chapter" data-level="4.2.5" data-path="el-diccionario.html"><a href="el-diccionario.html#instrucción-para-generar-o-evitar-los-tabulados"><i class="fa fa-check"></i><b>4.2.5</b> Instrucción para generar o evitar los tabulados</a></li>
<li class="chapter" data-level="4.2.6" data-path="el-diccionario.html"><a href="el-diccionario.html#control-del-comportamiento-de-los-scripts"><i class="fa fa-check"></i><b>4.2.6</b> Control del comportamiento de los <em>scripts</em></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="el-diccionario.html"><a href="el-diccionario.html#la-hoja-de-regiones"><i class="fa fa-check"></i><b>4.3</b> La hoja de regiones</a></li>
<li class="chapter" data-level="4.4" data-path="el-diccionario.html"><a href="el-diccionario.html#la-hoja-de-provincias"><i class="fa fa-check"></i><b>4.4</b> La hoja de provincias</a></li>
<li class="chapter" data-level="4.5" data-path="el-diccionario.html"><a href="el-diccionario.html#la-hoja-con-las-cortes-de-apelaciones"><i class="fa fa-check"></i><b>4.5</b> La hoja con las Cortes de Apelaciones</a></li>
<li class="chapter" data-level="4.6" data-path="el-diccionario.html"><a href="el-diccionario.html#la-hoja-de-delitos"><i class="fa fa-check"></i><b>4.6</b> La hoja de delitos</a></li>
<li class="chapter" data-level="4.7" data-path="el-diccionario.html"><a href="el-diccionario.html#la-hoja-de-familias-de-delitos"><i class="fa fa-check"></i><b>4.7</b> La hoja de familias de delitos</a></li>
<li class="chapter" data-level="4.8" data-path="el-diccionario.html"><a href="el-diccionario.html#la-hoja-de-accidentes"><i class="fa fa-check"></i><b>4.8</b> La hoja de accidentes</a></li>
<li class="chapter" data-level="4.9" data-path="el-diccionario.html"><a href="el-diccionario.html#hojas-con-los-títulos"><i class="fa fa-check"></i><b>4.9</b> Hojas con los títulos</a></li>
<li class="chapter" data-level="4.10" data-path="el-diccionario.html"><a href="el-diccionario.html#hojas-con-las-notas-al-pie"><i class="fa fa-check"></i><b>4.10</b> Hojas con las notas al pie</a></li>
<li class="chapter" data-level="4.11" data-path="el-diccionario.html"><a href="el-diccionario.html#hojas-con-series-temporales"><i class="fa fa-check"></i><b>4.11</b> Hojas con series temporales</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="el-archivo-validador.html"><a href="el-archivo-validador.html"><i class="fa fa-check"></i><b>5</b> El archivo validador</a>
<ul>
<li class="chapter" data-level="5.1" data-path="el-archivo-validador.html"><a href="el-archivo-validador.html#contenido-y-estructura-del-archivo-validador"><i class="fa fa-check"></i><b>5.1</b> Contenido y estructura del archivo validador</a></li>
<li class="chapter" data-level="5.2" data-path="el-archivo-validador.html"><a href="el-archivo-validador.html#resultado-de-la-validación"><i class="fa fa-check"></i><b>5.2</b> Resultado de la validación</a></li>
<li class="chapter" data-level="5.3" data-path="el-archivo-validador.html"><a href="el-archivo-validador.html#precauciones"><i class="fa fa-check"></i><b>5.3</b> Precauciones</a></li>
</ul></li>
<li class="part"><span><b>TERCERA PARTE: ESTRUCTURA DEL SISTEMA DE SCRIPTS</b></span></li>
<li class="chapter" data-level="" data-path="presentación-de-la-tercera-parte.html"><a href="presentación-de-la-tercera-parte.html"><i class="fa fa-check"></i>Presentación de la tercera parte</a></li>
<li class="chapter" data-level="6" data-path="estructura.html"><a href="estructura.html"><i class="fa fa-check"></i><b>6</b> La estructura del script</a>
<ul>
<li class="chapter" data-level="6.1" data-path="estructura.html"><a href="estructura.html#el-flujo-de-init.r"><i class="fa fa-check"></i><b>6.1</b> El flujo de init.R</a></li>
<li class="chapter" data-level="6.2" data-path="estructura.html"><a href="estructura.html#generación-de-tabulados-y-validaciones"><i class="fa fa-check"></i><b>6.2</b> Generación de tabulados y validaciones</a></li>
<li class="chapter" data-level="6.3" data-path="estructura.html"><a href="estructura.html#localización-de-bugs"><i class="fa fa-check"></i><b>6.3</b> Localización de bugs</a></li>
<li class="chapter" data-level="6.4" data-path="estructura.html"><a href="estructura.html#ejecución-del-script"><i class="fa fa-check"></i><b>6.4</b> Ejecución del script</a></li>
</ul></li>
<li class="part"><span><b>ANEXOS</b></span></li>
<li class="chapter" data-level="" data-path="anexo1.html"><a href="anexo1.html"><i class="fa fa-check"></i>Anexo 1: Nombres de variables de bases de datos</a></li>
<li class="chapter" data-level="" data-path="anexo-2-mejoras-pendientes-al-script-v-0-1.html"><a href="anexo-2-mejoras-pendientes-al-script-v-0-1.html"><i class="fa fa-check"></i>Anexo 2: Mejoras pendientes al script v. 0.1</a>
<ul>
<li class="chapter" data-level="" data-path="anexo-2-mejoras-pendientes-al-script-v-0-1.html"><a href="anexo-2-mejoras-pendientes-al-script-v-0-1.html#mejoras-planificadas"><i class="fa fa-check"></i>Mejoras planificadas</a></li>
<li class="chapter" data-level="" data-path="anexo-2-mejoras-pendientes-al-script-v-0-1.html"><a href="anexo-2-mejoras-pendientes-al-script-v-0-1.html#mejoras-a-evaluar"><i class="fa fa-check"></i>Mejoras a evaluar</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anexo3.html"><a href="anexo3.html"><i class="fa fa-check"></i>Anexo 3: Diagrama de flujo: generación automatizada de tabulados de SPyJ</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Manual de uso de scritps de automatización de tabulados de Registros Administrativos de Seguridad Pública y Justicia</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="el-diccionario" class="section level1" number="4">
<h1><span class="header-section-number"> 4</span> El diccionario</h1>
<p>El segundo gran insumo para la ejecutar la automatización a través del sistema de <em>scripts</em> es el diccionario. Como se había mencionado, el diccionario es un archivo de Excel que contiene las instrucciones necesarias para cargar los archivos que se usan para generar los tabulados y validaciones, la información para controlar el flujo de ejecución del script y, en gran medida, la información auxiliar no contenida en las bases de datos que se utiliza para la tabulación, fundamentalmente categorías de variables complejas, los títulos y las notas a pie de los cuadros.</p>
<p>El uso del diccionario permite controlar la ejecución de algunas operaciones realizadas por los <em>scripts</em> sin tener que intervenir el código en R. En otros términos, gracias al diccionario, para controlar un código complejo y escrito en un lenguaje de programación avanzado, se necesita sólo conocimientos de Excel.</p>
<p>Además, el diccionario permite actualizar información sin necesidad de tocar el código de los <em>scripts</em>. Por ejemplo, si cambia la familia de algún delito del CUM de un año a otro, para que ese cambio se refleje en los nuevos tabulados, basta con actualizarlo en la hoja de cálculo respectiva del diccionario y no intervenir el código.</p>
<p>Para poder replicar tabulados de cualquier año que se desee y tener siempre acceso a la serie temporal, es recomendable y deseable que se genere un diccionario distinto e independiente para cada año que se generen tabulados automatizados.</p>
<p>Para el correcto funcionamiento de los <em>scripts</em>, el contenido del diccionario debe ser tan preciso como las modificaciones manuales que se introducen a las bases de datos. Por lo tanto, es fundamental construir o actualizar este archivo siguiendo de forma estricta las instrucciones contenidas en este capítulo.</p>
<div id="visión-general-del-diccionario" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Visión general del diccionario</h2>
<p>El diccionario puede estar compuesto por tantas hojas como sean necesarias para generar los tabulados. Pero seis al menos se requieren para cualquiera de las tres fuentes administrativas (PDI, CCH y CAPJ/PJUD) cuyos tabulados son generados por los <em>scripts</em>. Son las siguientes:</p>
<ul>
<li><p>La hoja “meta”;</p></li>
<li><p>La hoja de regiones;</p></li>
<li><p>La hoja de delitos;</p></li>
<li><p>La hoja con el listado de familias de delitos;</p></li>
<li><p>Las hojas con títulos;</p></li>
<li><p>Las hojas con notas a pie.</p></li>
</ul>
<p>Adicionalmente, en el diccionario se ingresan los datos para la construcción de tabulados con series de tiempo. Más adelante se detalla el procedimiento para esto. Mientras tanto, tómese en consideración que si los tabulados contienen cuadros con series de tiempo, se agrega una hoja de cálculo al diccionario por cada uno de esos cuadros.</p>
<p>A grandes rasgos, este es el diccionario básico: las seis hojas de cálculo mencionadas más las que correspondan a cuadros con series temporales. Con este diccionario básico es posible generar el tabulado más sencillo de los tres: el de PDI.</p>
<p>Para generar el tabulado de Carabineros de Chile, al diccionario básico deben agregarse las siguientes hojas de cálculo:</p>
<ul>
<li><p>La hoja de provincias;</p></li>
<li><p>La hoja de accidentes;</p></li>
</ul>
<p>Para generar el tabulado de estadísticas judiciales, al diccionario básico debe agregarse la hoja de cálculo con el listado de Cortes de Apelaciones.</p>
<p>A continuación se describen en qué consisten cada una de estas hojas y cómo se construyen.</p>
</div>
<div id="la-hoja-meta" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> La hoja “meta”</h2>
<p>La primera hoja, la hoja “meta”, es la que contiene la información fundamental para la carga de datos por parte de los <em>scripts</em> y el control de su flujo. En otros términos, tiene la “meta-información” necesaria para que el código procese los datos de las bases y genere los tabulados y las validaciones.</p>
<p>Está compuesta por 6 columnas y, en el estado actual (diciembre de 2020) de las bases de datos, 38 filas sin contar la primera, que contiene los nombres de las columnas. La sexta columna tiene instrucciones sobre cómo llenar la quinta columna, llamada “cont”, que es una abreviación de “contenido”. La única de las columnas que debe modificarse y manipularse para controlar el comportamiento de los <em>scripts</em> es ésta, la quinta. Las cuatro primeras deben mantenerse intactas, pues de la lectura de su contenido el código obtiene la información para ejecutar operaciones. Si se altera algo de esas columnas, los <em>scripts</em> podría romperse o comportarse de forma errática.</p>
<p>La hoja meta debe contener al menos la siguiente información:</p>
<ul>
<li><p>año para el cual se generan los tabulados y/o validaciones;</p></li>
<li><p>ubicación de cada una de las bases de datos necesarias para generar el tabulado de una fuente administrativa;</p></li>
<li><p>ubicación de los archivos validadores;</p></li>
<li><p>el texto que se incorpora como fuente en cada tabulado;</p></li>
<li><p>instrucción para realizar o evitar los tabulados de cada fuente.</p></li>
</ul>
<p>A continuación se detalla en qué consiste cada tipo de meta-información contenida en la hoja y cómo debe modificarse y administrarse para controlar el comportamiento del script.</p>
<div id="el-año" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> El año</h3>
<p>Con el id “agno”, esta meta-información le informa a los <em>scripts</em> cuál es el año al que corresponden las bases de datos que va a procesar. Con esa información, crea datos para cuadros con series temporales, nombres de archivos, listas y otros objetos necesarios para la ejecución del código.</p>
<p>Si no se incluye el año en la columna “cont”, el script arrojará error.</p>
</div>
<div id="la-ubicación-de-las-bases-de-datos" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> La ubicación de las bases de datos</h3>
<p>La ubicación de las bases de datos se incorpora en la columna “cont” para cada fuente administrativa. Se puede identificar qué base de datos se pide en cada fila por el id: un nombre compuesto de al menos dos términos separados por un guión bajo (_). La última parte del nombre después del último guión bajo identifica a la fuente administrativa: pdi, cch o pjud. Todo lo que se encuentra antes de ese guión bajo corresponde a la base de datos específica para esa fuente. Así, el id “victimas_pdi” refiere a la base de datos “víctimas” de la PDI; el id “suprema_terminadas_pjud” corresponde a la base de datos de causas terminadas en la Corte Suprema.</p>
<p>En la columna “cont” debe incluirse la ubicación física del archivo que contiene la base de datos: la ruta completa al directorio y el nombre del archivo, con extensión incluida. Así, si el archivo de la base de datos de causas civiles terminadas se encuentra en el directorio “bases de datos” de la unidad principal del computador, el contenido de la columna “cont” debiera ser el siguiente: <code>c://bases de datos/civiles terminadas.csv</code>.</p>
<p>Sólo pueden ingresarse rutas a ubicaciones locales, dentro del computador. El script no soporta el ingreso de direcciones remotas de red o web.</p>
<p>En la actualidad (diciembre de 2020), los tabulados completos de las tres fuentes administrativas (44 cuadros de PDI; 40 de Carabineros de Chile y 29 del Poder Judicial) se generan a partir de 27 bases de datos: 4 para PDI, 5 para CCH y 18 para CAPJ/PJUD. Si no desea generarse el tabulado de una fuente en particular, entonces la columna “cont” de todas sus bases de datos debe quedar en blanco, sin ningún contenido. Pero si se ingresa la ubicación de al menos una base de datos para esa fuente, deben ingresarse todas. De lo contrario, el código generará error. Ejemplo: si sólo queremos generar los tabulados de PDI, la columna “cont” para las bases de datos de las otras dos fuentes (CCH y CAPJ/PJUD) deben quedar vacías; pero además, deben ingresarse las ubicaciones de las cuatro bases de datos de PDI. Si se ingresa la ubicación de tres o menos bases de datos, el código primero arrojará una advertencia y luego un error.</p>
<p>De igual forma, si al menos una de las ubicaciones de las bases de datos ha sido ingresada de forma incorrecta, el script arrojará error.</p>
</div>
<div id="ubicación-de-los-archivos-validadores" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Ubicación de los archivos validadores</h3>
<p>El ingreso de la ubicación de los archivos validadores debe hacerse de la misma forma que se ingresa la ubicación para las bases de datos. En la columna id, los nombres de los validadores tienen como prefijo, precisamente, la palabra “validadores” y se encuentra separada del nombre de la fuente administrativa por un guión bajo. La ruta completa, incluida el nombre del archivo y su extensión, debe ingresarse en la columna “cont” respectiva.</p>
<p>Si no se desea que los <em>scripts</em> realicen una validación de los tabulados de una fuente administrativa específica, la columna “cont” respectiva debe quedar vacía, sin ningún contenido. Si, por el contrario, se agrega la ubicación correcta de un archivo para validar (según las instrucciones del próxima capítulo), los <em>scripts</em> generará un archivo Excel que mostrará todas las discrepancias que existen entre los cuadros generados de forma atuomatizada, de un lado, y los cuadros contenidos en el archivo validador, del otro.</p>
<p>Si se ingresa una ruta incorrecta, los <em>scripts</em> arrojarán un error.</p>
</div>
<div id="texto-de-la-fuente-para-tabulados" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Texto de la fuente para tabulados</h3>
<p>En la hoja “meta” también se ingresa el texto que se adjunta al pie de cada cuadro indicando la fuente de procedencia de los datos. En la columna id, los nombres de las fuentes tienen como prefijo la palabra “fuente” y se encuentra separada del nombre de la fuente administrativa por un guión bajo. En la columna “cont” debe ingresarse el texto que se desea aparezca en los cuadros respectivos. Por ejemplo: el texto que aparecerá al pie de los cuadros de Carabineros de Chile como fuente debe agregarse en la columna “cont” que corresponde a la fila con id “fuente_cch”.</p>
</div>
<div id="instrucción-para-generar-o-evitar-los-tabulados" class="section level3" number="4.2.5">
<h3><span class="header-section-number">4.2.5</span> Instrucción para generar o evitar los tabulados</h3>
<p>Las últimas filas del archivo contienen controladores de flujo. Se identifican por el prefijo “procesar” separado del nombre de la fuente administrativa por un guión bajo. Su función es indicarle al código si genera o no el archivo Excel con los tabulados de la fuente respectiva. Si se escribe cualquier cosa en la columna “cont”, entonces el código generará el archivo Excel con los tabulados respectivos. Para evitar que genere el archivo, la columna correspondiente debe quedar en blanco.</p>
<p>Si, por ejemplo, se requiere validar los tabulados del Poder Judicial pero no se generar el archivo con los tabulados automatizados, debe ingresarse la ubicación del archivo judicial en la fila con id “validador_pjud” y dejarse en blanco el controlador de flujo para la misma fuente: “procesar_pjud”.</p>
<p>Si se dejan en blanco ambos valores y se ingresan todas las bases de datos de la fuente administrativa correspondiente, entonces el script cargará las bases, generará los cuadros, pero no los guardará en el archivo Excel de tabulados ni creará el archivo de validación. Habrá cargado la bases de datos y procesado tabulados de forma innecesaria e ineficiente, sin propósito. Si no se desea procesar ni tabulados ni validación de alguna fuente en particular, deben también dejarse en blanco las columnas “cont” correspondientes a las bases de datos.</p>
<p>Si no se ingresan bases de datos para una fuente y, sin embargo, sí se ingresa la ubicación de su validador y/o algún contenido a su controlador de flujo, el script arrojará error.</p>
</div>
<div id="control-del-comportamiento-de-los-scripts" class="section level3" number="4.2.6">
<h3><span class="header-section-number">4.2.6</span> Control del comportamiento de los <em>scripts</em></h3>
<p>Esta es la forma en que se controla el comportamiento y el flujo de los <em>script</em>: a través del contenido que se ingresa en la columna “cont” de la hoja “meta”. Si se desea generar tabulados sólo para una fuente (por ejemplo, PDI), las celdas correspondientes a las otras fuentes deben dejarse en blanco. Si sólo se desea generar tabulados de esa fuente, también debe dejarse en blanco la columna “cont” de su validador; o viceversa: si sólo se desea validar cuadros sin generar el archivo con el tabulado completo, debe dejarse en blanco la columna “cont” de su controlador de flujo (en este caso, “procesar_pdi”). Y así sucesivamente.</p>
</div>
</div>
<div id="la-hoja-de-regiones" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> La hoja de regiones</h2>
<p>La segunda hoja de cálculo del diccionario es la que tiene el listado de todas las regiones del país, con sus nombres básicos y también con las posibles combinaciones complejas de sus nombres con prefijos y sufijos. De esta hoja toma el código los nombres de las regiones que se agregan a los cuadros, pero también la información para ordenarlas.</p>
<p>Esta hoja debe mantenerse tal como se encuentra en la actualidad. El único motivo para modificarla sería la creación de una nueva región, que debiera agregarse al final del listado con la información correspondiente.</p>
</div>
<div id="la-hoja-de-provincias" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> La hoja de provincias</h2>
<p>Es similar a la hoja de regiones. Cumple la misma función, pero contiene el listado de las provincias. Tampoco debe modificarse a menos que se requiera incorporar una nueva provincia.</p>
</div>
<div id="la-hoja-con-las-cortes-de-apelaciones" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> La hoja con las Cortes de Apelaciones</h2>
<p>Similar a las hojas de regiones y provincias. Aporta nombres a los cuadros y el orden en el que se desplegarán.</p>
<p>No debe modificarse a menos que existan motivos debidamente fundados.</p>
</div>
<div id="la-hoja-de-delitos" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> La hoja de delitos</h2>
<p>Contiene un listado de todos los delitos incluidos en el CUM de cada año, con su código, su glosa y la familia a la que pertenecen.</p>
<p>Si de un año a otro se produce una modificación en la forma de registrar un delito, debe incorporarse en esta hoja de cálculo. Ejemplo hipotético: si el delito “maltrato a persona mayor de edad”, que hoy se agrupa en la familia “Violencia Intrafamiliar”, pasa a la familia “Contra las personas”, entonces la modificación respectiva debe hacerse en esta hoja.</p>
</div>
<div id="la-hoja-de-familias-de-delitos" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> La hoja de familias de delitos</h2>
<p>Contiene un listado de las familias de delitos ordenadas de acuerdo a como se presentan en los tabulados publicados. Su función es simplemente aportar el orden de las familia. No debe modificarse a menos que cambie el orden con el que se desea se presenten en los cuadros a publicar.</p>
<p>Si el texto de los nombres de las familias de esta hoja no es idéntico al texto de las familias de la hoja anterior, entonces el script no podrá incluir la familia respectiva en los cuadros con delitos. Es indispensable que no exista discrepancia entre ambas hojas.</p>
</div>
<div id="la-hoja-de-accidentes" class="section level2" number="4.8">
<h2><span class="header-section-number">4.8</span> La hoja de accidentes</h2>
<p>Contiene el listado con los nombres de los accidentes registrados por Carabineros de Chile y el orden en que se despliegan. Si se produce un cambio en los nombres o el orden, debe incorporarse en esta hoja para que quede reflejado en los tabulados.</p>
</div>
<div id="hojas-con-los-títulos" class="section level2" number="4.9">
<h2><span class="header-section-number">4.9</span> Hojas con los títulos</h2>
<p>Los títulos de los cuadros se añaden a través del diccionario. Existe una hoja con títulos para cada fuente administrativa. El nombre de cada una de ellas corresponde al prefijo “titulos” y se encuentra separada del nombre de la fuente administrativa por un guión bajo. Los títulos de los cuadros del Poder Judicial, por ejemplo, se encuentran en la hoja llamada “titulos_pjud”.</p>
<p>Dos columnas tiene cada una de estas hojas: la del número de cuadro y la del texto del título. Para los cuadros que llevan más de un título, deben agregarse todos, uno por línea. Si entre dos títulos existiese una línea en blanco, también debe agregarse en la hoja. Así quedan los títulos de los cuatro primeros cuadros del tabulado de PDI 2019:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th><em>cuadro</em></th>
<th><em>titulo</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>CAPÍTULO I: DELITOS INVESTIGADOS</td>
</tr>
<tr class="even">
<td>1</td>
<td></td>
</tr>
<tr class="odd">
<td>1</td>
<td>DELITOS INVESTIGADOS POR FAMILIA DE DELITOS Y MATERIAS</td>
</tr>
<tr class="even">
<td>1</td>
<td>CUADRO 1: NÚMERO DE DELITOS INVESTIGADOS POR AÑO, SEGÚN REGIÓN</td>
</tr>
<tr class="odd">
<td>2</td>
<td>CUADRO 2: NÚMERO DE DELITOS INVESTIGADOS POR REGIÓN, SEGÚN FAMILIA Y MATERIAS, 2019</td>
</tr>
<tr class="even">
<td>3</td>
<td>CUADRO 3: NÚMERO DE DELITOS INVESTIGADOS POR MES DE OCURRENCIA, SEGÚN FAMILIA Y MATERIAS, 2019</td>
</tr>
<tr class="odd">
<td>4</td>
<td>CUADRO 4: NÚMERO DE DELITOS INVESTIGADOS POR DÍA DE OCURRENCIA, SEGÚN FAMILIA Y MATERIAS, 2019</td>
</tr>
</tbody>
</table>
<p>Nótese que la segunda fila tiene número de cuadro pero no contenido en la columna del título. Se agregará de esa forma al cuadro que quede en el archivo final del tabulado.</p>
<p>El texto de los títulos será tomado por los <em>scripts</em> tal y como se ingrese en esta hoja de cálculo.</p>
</div>
<div id="hojas-con-las-notas-al-pie" class="section level2" number="4.10">
<h2><span class="header-section-number">4.10</span> Hojas con las notas al pie</h2>
<p>Las notas al pie se ingresan de la misma forma que los títulos: en hojas específicas para cada fuente administrativa. Se identifican porque el nombre de cada una de ellas corresponde al prefijo “notas” y se encuentra separada del nombre de la fuente administrativa por un guión bajo.</p>
<p>La hoja de las notas es más compleja que la de títulos. Requiere información para seis variables:</p>
<ul>
<li><p>cuadro: el número del cuadro al que se agregará la nota;</p></li>
<li><p>fila: número de fila en la que se insertará;</p></li>
<li><p>columna: número de columna; como en Excel las columnas se designan con letras, el número debe calcularse. Cualquiera que sea el método que se elija para ello, este dato debe ingresarse en formato numérico;</p></li>
<li><p>ancla: texto al cual se añadirá el número de la nota; el texto debe estar compuesto por una palabra o número, pero sólo uno/a; el script no soporta insertar el número de nota a otro tipo de texto que no sea una palabra o un número;</p></li>
<li><p>numero: número de la nota para el cuadro al que se agrega;</p></li>
<li><p>texto: el contenido textual de la nota.</p></li>
</ul>
<p>Para cada nota, todos estos seis valores son obligatorios. Si falta alguno, la nota no se agregará o el código puede arrojar error.</p>
</div>
<div id="hojas-con-series-temporales" class="section level2" number="4.11">
<h2><span class="header-section-number">4.11</span> Hojas con series temporales</h2>
<p>A través del diccionario también se generan cuadros con series temporales. En lugar de generar el dato para cada año a partir de las bases de datos, cada <em>script</em> calcula el valor para el año de referencia y lo une al cuadro que se encuentra en el diccionario.</p>
<p>Para ello, debe pegarse el cuadro con los datos de todos los años anteriores. El script los tomará para unirlo al dato del año de referencia.</p>
<p>Es importante respetar la forma de nombrar la hoja para que el script sepa de donde tomar el dato. El nombre se compone del prefijo “c” seguido del número de cuadro del que se trate; como sufijo se usa la fuente administrativa, que se separa del prefijo con un guión bajo. Así, para el generar el cuadro 35 con una serie temporal con datos de Carabineros de Chile, la hoja debe llevar el siguiente nombre: c35_cch.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="las-bases-de-datos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="el-archivo-validador.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Manual_Uso_Script_SPyJ.pdf", "Manual_Uso_Script_SPyJ.epub"],
"toc": {
"collapse": "subsection"
},
"highlight": "tango"
});
});
</script>

</body>

</html>
